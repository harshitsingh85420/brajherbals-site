<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Braj Herbals — Products</title>
<style>
  :root{--bord:#e5e5e5;--brand:#0a7;--fg:#111}*{box-sizing:border-box}
  body{margin:0;font-family:system-ui,Arial;color:var(--fg)}
  header{padding:12px 16px;border-bottom:1px solid var(--bord);display:flex;justify-content:space-between;align-items:center}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;padding:16px}
  .card{border:1px solid var(--bord);border-radius:12px;padding:12px;background:#fff}
  .card img{width:100%;height:180px;object-fit:cover;border-radius:8px}
  .btn{display:inline-block;padding:10px 14px;border-radius:8px;background:var(--brand);color:#fff;text-decoration:none}
  .muted{color:#555}
</style>
</head>
<body>
<header>
  <h3>Braj Herbals</h3>
  <div class="muted">Display + “Buy Now” (v0)</div>
</header>

<main id="list" class="grid"></main>

<script>
// 1) Paste your published Google Sheet CSV link here:
const SHEET = https://docs.google.com/spreadsheets/d/1CIFs7P3sg3TZ7ft5wUkZPF8V3qHU2Fau063Z9TgDPQw/edit?usp=sharing;

// Minimal CSV parser for commas/quotes
function parseCSV(text){
  const rows=[]; let cur="", q=false, row=[];
  for(let i=0;i<text.length;i++){
    const c=text[i], n=text[i+1];
    if(c=='"'){ if(q&&n=='"'){cur+='"'; i++;} else q=!q; }
    else if(c==',' && !q){ row.push(cur); cur=""; }
    else if((c=='\n'||c=='\r') && !q){ row.push(cur); rows.push(row); cur=""; row=[]; if(c=='\r'&&n=='\n') i++; }
    else cur+=c;
  }
  if(cur||row.length) { row.push(cur); rows.push(row); }
  return rows;
}

async function load(){
  const r = await fetch(SHEET); const t = await r.text();
  const rows = parseCSV(t).filter(r=>r.join('').trim()!=='');
  const head = rows.shift().map(h=>h.trim().toLowerCase());
  const idx = name => head.indexOf(name);
  const data = rows.map(r=>({
    id:r[idx('id')], title:r[idx('title')], price:r[idx('price')],
    image:r[idx('image')], description:r[idx('description')],
    pay_url:r[idx('pay_url')], category:r[idx('category')]
  }));
  render(data);
}

function render(items){
  const el = document.getElementById('list'); el.innerHTML="";
  items.forEach(p=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${p.image||''}" alt="${p.title||''}">
      <h4>${p.title||''}</h4>
      <p><b>₹${p.price||''}</b></p>
      <p class="muted">${p.description||''}</p>
      <a class="btn" href="${p.pay_url||'#'}" target="_blank" rel="noopener">Buy Now</a>`;
    el.appendChild(card);
  });
}
load();
</script>
</body>
</html>
